<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>MARPED â€“ GIR â†’ Glukoz KarÄ±ÅŸÄ±mÄ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding-bottom:70px}
header{background:#6f42c1;color:white;padding:15px;text-align:center}
.container{padding:20px;max-width:520px;margin:auto}
.card{background:white;border-radius:12px;padding:20px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
input,button{width:100%;padding:10px;margin-top:10px;font-size:16px}
button{background:#6f42c1;color:white;border:none;border-radius:8px}
.result{margin-top:15px;font-size:15px}
.ok{color:#146c43;font-weight:bold}
.warn{color:#b02a37;font-weight:bold}
.best{background:#e9f7ef;padding:10px;border-radius:8px;margin-top:10px}
small{color:#666}

/* Alt MenÃ¼ */
.bottom-menu{
  position:fixed; bottom:0; left:0; width:100%;
  background:#6f42c1; display:flex; justify-content:space-around;
  padding:8px 0; z-index:1000;
}
.bottom-menu a{
  color:white; text-decoration:none; font-size:14px; text-align:center; flex:1;
}
.bottom-menu span{font-size:12px}
</style>
</head>

<body>

<header>
<h2>GIR â†’ Glukoz KarÄ±ÅŸÄ±mÄ±</h2>
<p>D5â€“D10â€“D20â€“D30 (Miz Mayi)</p>
</header>

<div class="container">
<div class="card">

<label>Kilo (kg)</label>
<input type="number" id="kg" value="10">

<label>Hedef GIR (mg/kg/dk)</label>
<input type="number" id="gir" value="5">

<label>Toplam sÄ±vÄ± (ml/gÃ¼n)</label>
<input type="number" id="vol" value="800">

<button onclick="hesapla()">Hesapla</button>

<div class="result" id="sonuc"></div>

</div>
</div>

<script>
function kombinasyon(c1, c2, vol, hedef_g){
  let g1 = c1/100, g2 = c2/100;
  let x = (hedef_g - g2*vol) / (g1 - g2);

  if(x < 0 || x > vol) return null;

  return {
    d1: c1, ml1: x,
    d2: c2, ml2: vol - x,
    maxDex: Math.max(c1, c2)
  };
}

function hesapla(){
  let kg = +kgInput.value;
  let gir = +girInput.value;
  let vol = +volInput.value;

  if(kg<=0||gir<=0||vol<=0){
    sonuc.innerHTML="TÃ¼m alanlarÄ± doldurun.";
    return;
  }

  let glukoz = gir * kg * 1440 / 1000;
  let hedef_yuzde = (glukoz / vol) * 100;

  let combos = [
    kombinasyon(10,5,vol,glukoz),
    kombinasyon(20,10,vol,glukoz),
    kombinasyon(30,20,vol,glukoz)
  ].filter(x=>x);

  if(combos.length==0){
    sonuc.innerHTML="<span class='warn'>âš ï¸ Bu GIR bu hacimde saÄŸlanamaz.</span>";
    return;
  }

  let best = combos.reduce((a,b)=>a.maxDex<b.maxDex?a:b);

  let html = `
  <b>GÃ¼nlÃ¼k glukoz:</b> ${glukoz.toFixed(1)} g<br>
  <b>Hedef ortalama konsantrasyon:</b> %${hedef_yuzde.toFixed(1)}<br><br>
  `;

  combos.forEach(c=>{
    html += `<div class="ok">
    ${c.ml1.toFixed(0)} ml D${c.d1} + ${c.ml2.toFixed(0)} ml D${c.d2}
    </div>`;
  });

  html += `
  <div class="best">
  ğŸ† <b>Periferik dostu Ã¶neri:</b><br>
  ${best.ml1.toFixed(0)} ml D${best.d1} + ${best.ml2.toFixed(0)} ml D${best.d2}
  </div>
  <br>
  <small>
  TÃ¼m hacim glukozludur. Toplam glukoz hedef GIRâ€™i TAM karÅŸÄ±lar.<br>
  Nihai sorumluluk klinisyene aittir.
  </small>
  `;

  sonuc.innerHTML = html;
}

const kgInput = document.getElementById("kg");
const girInput = document.getElementById("gir");
const volInput = document.getElementById("vol");
</script>

<div class="bottom-menu">
  <a href="index.html">ğŸ <br><span>Ana MenÃ¼</span></a>
  <a href="gir.html">ğŸ§®<br><span>Hesap</span></a>
  <a href="fizikmuayene.html">ğŸ“<br><span>Notlar</span></a>
</div>

</body>
</html>
