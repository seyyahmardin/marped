<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>MARPED â€“ AÅŸÄ± Takip & Eksik AÅŸÄ± Åablonu (2025)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f8; margin: 0; padding-bottom: 100px; line-height: 1.6; }
    header { background: #6f42c1; color: white; padding: 15px; text-align: center; }
    .container { padding: 20px; max-width: 700px; margin: auto; }
    .card { background: white; border-radius: 14px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,.1); }
    input[type="date"], button { width: 100%; padding: 12px; margin: 10px 0; font-size: 16px; border-radius: 8px; border: 1px solid #ccc; }
    button { background: #6f42c1; color: white; border: none; cursor: pointer; font-weight: bold; }
    button:hover { background: #5a369e; }
    .result { margin-top: 25px; padding: 20px; background: #ffffff; border: 1px solid #e0e0e0; border-radius: 10px; white-space: pre-wrap; font-size: 14px; line-height: 1.7; }
    .done { color: #198754; text-decoration: line-through; }
    .missing { color: #dc3545; font-weight: bold; }
    .catchup { color: #fd7e14; font-style: italic; }
    .bottom-menu { position: fixed; bottom: 0; left: 0; width: 100%; background: #6f42c1; display: flex; justify-content: space-around; padding: 10px 0; z-index: 1000; }
    .bottom-menu a { color: white; text-decoration: none; font-size: 14px; text-align: center; flex: 1; }
    .bottom-menu span { font-size: 12px; display: block; }
    .bottom-menu a.active { background: rgba(255,255,255,0.2); }
  </style>
</head>
<body>

<header>
  <h2>AÅŸÄ± Takip & Eksik AÅŸÄ± Åablonu (2025)</h2>
  <p>DoÄŸum tarihini gir â†’ yapÄ±lan aÅŸÄ±larÄ± iÅŸaretle â†’ eksik aÅŸÄ±lar + catch-up Ã¶nerisi gÃ¶r</p>
</header>

<div class="container">
  <div class="card">
    <label for="dogumTarihi">BebeÄŸin DoÄŸum Tarihi</label>
    <input type="date" id="dogumTarihi">

    <h3 style="margin-top:20px;">YapÄ±lan AÅŸÄ±larÄ± Ä°ÅŸaretleyin</h3>
    <div id="asiListesi"></div>

    <button onclick="asiTakipHesapla()" style="margin-top:20px;">Hesapla & Åablon OluÅŸtur</button>

    <div class="result" id="sonuc"></div>

    <button onclick="metniKopyala()" style="margin-top:15px;">ğŸ“‹ Tam Takip Notunu Kopyala</button>
  </div>
</div>

<script>
// 2025 Rutin + Sosyal Pediatri Catch-up Ã–nerilerine gÃ¶re aÅŸÄ± listesi
const asiTakvimi = [
  { id: "hepb1", ad: "Hepatit B (1. doz)", zaman: "DoÄŸumda", ay: 0 },
  { id: "bcg", ad: "BCG (Verem)", zaman: "2 ay", ay: 2 },
  { id: "karma1", ad: "6'li Karma (1. doz)", zaman: "2 ay", ay: 2 },
  { id: "kpa1", ad: "PnÃ¶mokok (KPA 1. doz)", zaman: "2 ay", ay: 2 },
  { id: "karma2", ad: "6'li Karma (2. doz)", zaman: "4 ay", ay: 4 },
  { id: "kpa2", ad: "PnÃ¶mokok (2. doz)", zaman: "4 ay", ay: 4 },
  { id: "karma3", ad: "6'li Karma (3. doz)", zaman: "6 ay", ay: 6 },
  { id: "kpa3", ad: "PnÃ¶mokok (3. doz)", zaman: "6 ay", ay: 6 },
  { id: "opa1", ad: "OPA (1. doz)", zaman: "6 ay", ay: 6 },
  { id: "kkk1", ad: "KKK (1. doz)", zaman: "12 ay", ay: 12 },
  { id: "sucicegi1", ad: "SuÃ§iÃ§eÄŸi (1. doz)", zaman: "12 ay", ay: 12 },
  { id: "kpa_rapel", ad: "PnÃ¶mokok (rapel)", zaman: "12 ay", ay: 12 },
  { id: "karma_rapel", ad: "6'li Karma (rapel)", zaman: "18 ay", ay: 18 },
  { id: "opa2", ad: "OPA (2. doz)", zaman: "18 ay", ay: 18 },
  { id: "hepa1", ad: "Hepatit A (1. doz)", zaman: "18 ay", ay: 18 },
  { id: "hepa2", ad: "Hepatit A (2. doz)", zaman: "24 ay", ay: 24 },
  { id: "kkk2", ad: "KKK (2. doz)", zaman: "48 ay (4 yaÅŸ)", ay: 48 },
  { id: "dabt_ipa", ad: "DaBT-Ä°PA (rapel)", zaman: "48 ay", ay: 48 },
  { id: "sucicegi2", ad: "SuÃ§iÃ§eÄŸi (2. doz)", zaman: "48 ay", ay: 48 },
  { id: "td", ad: "Td (rapel)", zaman: "13 yaÅŸ", ay: 156 }
];

function asiTakipHesapla() {
  const dogumTarihi = document.getElementById("dogumTarihi").value;
  if (!dogumTarihi) {
    document.getElementById("sonuc").innerHTML = '<div style="color:#dc3545;">DoÄŸum tarihini girin.</div>';
    return;
  }

  const dogum = new Date(dogumTarihi);
  const bugun = new Date();
  const yasGun = Math.floor((bugun - dogum) / (1000 * 60 * 60 * 24));
  const yasAy = Math.floor(yasGun / 30.4);

  let yapilan = [];
  document.querySelectorAll('input[name="asi"]:checked').forEach(el => yapilan.push(el.value));

  let metin = `AÅI TAKÄ°P & EKSÄ°K AÅI NOTU (${yasAy} aylÄ±k bebek)\nDoÄŸum: ${dogum.toLocaleDateString('tr-TR')}\n\n`;

  asiTakvimi.forEach(asi => {
    const gecikme = yasAy - asi.ay;
    let durum = "";
    if (yapilan.includes(asi.id)) {
      durum = `<span class="done">${asi.ad} â€“ YAPILDI (${asi.zaman})</span>`;
    } else if (gecikme >= 0) {
      durum = `<span class="missing">${asi.ad} â€“ EKSÄ°K / GEÃ‡ KALINDI (${asi.zaman})</span>`;
      // Catch-up Ã¶nerisi ekle (Sosyal Pediatri au5.pdf bazlÄ± basit)
      if (yasAy >= 12 && asi.id.includes("kpa")) durum += " â†’ 12-23 ay arasÄ± 2 doz, 24-59 ay tek doz Ã¶nerilir.";
      if (yasAy >= 18 && asi.id.includes("hepa")) durum += " â†’ Hep-A 18 aydan itibaren, 6 ay aralÄ±kla 2 doz.";
    } else {
      durum = `${asi.ad} â€“ YaklaÅŸan (${asi.zaman})`;
    }
    metin += `${durum}\n`;
  });

  metin += `\nCatch-up Ã–nerisi (Sosyal Pediatri 2025): Eksik dozlar minimum aralÄ±klarla tamamlanÄ±r. Tekrar doz gerekmez. 6'li karma aÅŸÄ± Ã¶ncelikli, Hib iÃ§ermeyen form yaÅŸa gÃ¶re deÄŸiÅŸir. e-NabÄ±z'dan takip edin.`;

  document.getElementById("sonuc").innerHTML = metin;
}

function metniKopyala() {
  const metin = document.getElementById("sonuc").innerText;
  if (!metin.trim() || metin.includes("doÄŸum tarihini girin")) {
    alert("Ã–nce doÄŸum tarihi girip hesaplayÄ±n.");
    return;
  }
  navigator.clipboard.writeText(metin).then(() => {
    alert("AÅŸÄ± takip notu panoya kopyalandÄ±!");
  }).catch(() => {
    alert("Kopyalama baÅŸarÄ±sÄ±z. Metni manuel kopyalayÄ±n.");
  });
}

// Sayfa yÃ¼klendiÄŸinde aÅŸÄ± checkbox listesini oluÅŸtur
document.addEventListener("DOMContentLoaded", () => {
  let listeHtml = '<h3 style="margin-top:20px;">YapÄ±lan AÅŸÄ±larÄ± Ä°ÅŸaretleyin</h3>';
  asiTakvimi.forEach(asi => {
    listeHtml += `
      <label style="display:block; margin:8px 0;">
        <input type="checkbox" name="asi" value="${asi.id}">
        ${asi.ad} (${asi.zaman})
      </label>`;
  });
  document.getElementById("asiListesi").innerHTML = listeHtml;
});
</script>

<div class="bottom-menu">
  <a href="index.html">ğŸ <br><span>Ana MenÃ¼</span></a>
  <a href="sivi.html">ğŸ’§<br><span>SÄ±vÄ±</span></a>
  <a href="asi-takip.html" class="active">ğŸ’‰<br><span>AÅŸÄ± Takip</span></a>
  <a href="fizikmuayene.html">ğŸ©º<br><span>Muayene</span></a>
</div>

</body>
</html>
