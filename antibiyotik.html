<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MARPED – Antibiyotik Doz Hesaplama</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 15px; background: #f8f9fa; }
    h1 { color: #006400; text-align: center; }
    .container { max-width: 600px; margin: auto; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin: 10px 0 5px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; }
    button { background: #006400; color: white; padding: 10px; border: none; width: 100%; cursor: pointer; font-size: 16px; }
    button:hover { background: #004d00; }
    #result { margin-top: 20px; padding: 15px; background: #e8f5e9; border: 1px solid #c8e6c9; border-radius: 5px; }
    .warning { color: red; font-weight: bold; margin-top: 15px; }
    .detail { margin: 8px 0; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h1>MARPED – Antibiyotik Doz Hesaplama</h1>
    <p>PDF: "Pediatri İlaç Dozları" (Dr. M. Nur TALAY) kaynaklı dozlar. <strong>MNT notlarını kontrol edin!</strong> Renal/hepatik yetmezlikte ayarlayınız.</p>

    <label for="ilac">Antibiyotik Seçiniz:</label>
    <select id="ilac">
      <option value="">Seçiniz...</option>
      <option value="amikasin">Amikasin</option>
      <option value="ampisilin">Ampisilin</option>
      <option value="ampisilin-sulbaktam">Ampisilin Sülbaktam</option>
      <option value="amoksisilin">Amoksisilin</option>
      <option value="amoksisilin-klav">Amoksisilin + Klavulanik Asit</option>
      <option value="azitromisin">Azitromisin</option>
      <option value="bactrim">Bactrim® (TMP-SMX)</option>
      <option value="ertapenem">Ertapenem</option>
      <option value="flukonazol">Flukonazol</option>
      <option value="gansiklovir">Gansiklovir</option>
      <option value="gentamisin">Gentamisin</option>
      <option value="imipenem-silastatin">İmipenem + Silastatin</option>
      <option value="klindamisin">Klindamisin</option>
      <option value="levofloksasin">Levofloksasin</option>
      <option value="linezolid">Linezolid</option>
      <option value="meropenem">Meropenem</option>
      <option value="metronidazol">Metronidazol</option>
      <option value="nitrofurantoin">Nitrofurantoin</option>
      <option value="ornidazol">Ornidazol</option>
      <option value="oseltamivir">Oseltamivir</option>
      <option value="piperasilin">Piperasilin</option>
      <option value="piperasilin-tazobaktam">Piperasilin + Tazobaktam (Piptaz)</option>
      <option value="sefalosporinler">Sefalosporinler (Sefaklor, Sefaleksin vb.)</option>
      <option value="siprofloksasin">Siprofloksasin</option>
      <option value="vankomisin">Vankomisin</option>
    </select>

    <label for="kilo">Vücut Ağırlığı (kg):</label>
    <input type="number" id="kilo" min="0.5" step="0.1" placeholder="Örn: 5.2">

    <label for="yas">Yaş Grubu:</label>
    <select id="yas">
      <option value="">Seçiniz...</option>
      <option value="yenidogan">Yenidoğan (0-28 gün)</option>
      <option value="bebek-cocuk">Bebek/Çocuk (1 ay+)</option>
      <option value="otit-direncli">Otit / Dirençli Pnömoni / MSS</option>
    </select>

    <label for="enfeksiyon">Enfeksiyon Tipi (isteğe bağlı):</label>
    <select id="enfeksiyon">
      <option value="standart">Standart / Hafif</option>
      <option value="direncli">Dirençli / Ciddi Enfeksiyon</option>
      <option value="otit">Akut Otit</option>
      <option value="iye">İdrar Yolu Enfeksiyonu</option>
      <option value="mss">Menenjit / MSS Enfeksiyonu</option>
    </select>

    <button onclick="hesapla()">Hesapla</button>

    <div id="result"></div>
    <div class="warning">Uyarı: Referans amaçlıdır. Klinik karar hekime aittir. MNT notlarını kontrol edin.</div>
  </div>

  <script>
    function hesapla() {
      const ilac = document.getElementById('ilac').value;
      const kilo = parseFloat(document.getElementById('kilo').value);
      const yas = document.getElementById('yas').value;
      const enf = document.getElementById('enfeksiyon').value;

      if (!ilac || !kilo || !yas) {
        document.getElementById('result').innerHTML = '<p style="color:red;">Gerekli alanları doldurun!</p>';
        return;
      }

      let dozGunluk = '';
      let dozBasi = '';
      let yol = '';
      let infSure = '';
      let dozBolum = '';
      let maxDoz = '';
      let not = 'MNT notlarını kontrol edin.';

      // PDF'den alınan dozlar (doz başı, yol, infüzyon süresi eklendi)
      if (ilac === 'amikasin') {
        yol = 'IV (2 saat infüzyon)';
        infSure = '2 saat';
        if (yas === 'yenidogan') {
          let dozTekMg = 0;
          if (kilo < 1.2) dozTekMg = 7.5 * kilo;
          else if (kilo < 2) dozTekMg = (7.5 + (kilo >= 2 ? 2.5 : 0)) * kilo; // yaklaşımlı
          else dozTekMg = 10 * kilo;
          dozBasi = dozTekMg.toFixed(1) + ' mg/doz';
          dozGunluk = '15-30 mg/kg/gün';
          dozBolum = '2-3x';
          maxDoz = 'Max: 1.5 g/gün';
          not += ' Tbc: 15-30 mg/kg/gün.';
        } else {
          let dozBasiMg = (15 + (kilo * 7.5)) / 2; // örnek ortalama
          dozBasi = dozBasiMg.toFixed(1) + ' mg/doz';
          dozGunluk = '15-22.5 mg/kg/gün';
          dozBolum = '2x';
        }
      } else if (ilac === 'ampisilin') {
        yol = 'IV / IM / PO';
        infSure = 'Yavaş IV (30-60 dk)';
        if (yas === 'yenidogan') {
          dozBasi = (50 * kilo).toFixed(1) + ' mg/doz (ortalama)';
          dozGunluk = '50-200 mg/kg/gün';
          dozBolum = '2-4x';
          not += ' Grup B Strep Menenjit: 300 mg/kg/gün.';
        } else {
          dozBasi = (100 * kilo / 4).toFixed(1) + ' mg/doz';
          dozGunluk = '100-200 mg/kg/gün';
          dozBolum = '4x';
          if (enf === 'mss') dozGunluk = '200-400 mg/kg/gün';
        }
      } else if (ilac === 'ampisilin-sulbaktam') {
        yol = 'IV / IM';
        infSure = '30-60 dk IV infüzyon';
        dozBasi = (100 * kilo / 4).toFixed(1) + ' mg/doz';
        dozGunluk = '100-150 mg/kg/gün';
        dozBolum = '4x';
        if (enf === 'mss') dozGunluk = '200-300 mg/kg/gün';
      } else if (ilac === 'amoksisilin') {
        yol = 'PO';
        infSure = 'Ağızdan';
        dozBasi = (25 * kilo / 3).toFixed(1) + ' mg/doz';
        dozGunluk = '25-50 mg/kg/gün';
        dozBolum = '2-3x';
        if (enf === 'direncli' || enf === 'otit') dozBasi = (80 * kilo / 2).toFixed(1) + ' mg/doz';
      } else if (ilac === 'amoksisilin-klav') {
        yol = 'PO';
        infSure = 'Ağızdan';
        dozBasi = (20 * kilo / 2).toFixed(1) + ' mg/doz';
        dozGunluk = '20-40 mg/kg/gün';
        dozBolum = '2x';
        if (enf === 'direncli' || enf === 'otit') dozBasi = (80 * kilo / 2).toFixed(1) + ' mg/doz';
      } else if (ilac === 'azitromisin') {
        yol = 'PO / IV';
        infSure = 'Ağızdan veya 1 saat IV';
        dozBasi = (10 * kilo).toFixed(1) + ' mg/doz (3 gün kür)';
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '1x';
      } else if (ilac === 'bactrim') {
        yol = 'PO / IV';
        infSure = '60-90 dk IV';
        dozBasi = (8 * kilo / 2).toFixed(1) + ' mg TMP/doz';
        dozGunluk = '8-12 mg/kg/gün (TMP)';
        dozBolum = '2x';
      } else if (ilac === 'ertapenem') {
        yol = 'IV';
        infSure = '30 dk infüzyon';
        dozBasi = (15 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '15 mg/kg/gün (yenidoğan)';
        dozBolum = '2x';
      } else if (ilac === 'flukonazol') {
        yol = 'IV / PO';
        infSure = 'Yavaş IV (30-60 dk)';
        dozBasi = (6 * kilo).toFixed(1) + ' mg/doz (yükleme)';
        dozGunluk = '3-12 mg/kg/gün';
        dozBolum = '1x';
      } else if (ilac === 'gansiklovir') {
        yol = 'IV';
        infSure = '1 saat infüzyon';
        dozBasi = (5 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '2x';
      } else if (ilac === 'gentamisin') {
        yol = 'IV / IM';
        infSure = '30-60 dk IV';
        dozBasi = (5 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '5-7.5 mg/kg/gün';
        dozBolum = '1-2x';
      } else if (ilac === 'imipenem-silastatin') {
        yol = 'IV';
        infSure = '30-60 dk infüzyon';
        dozBasi = (20 * kilo / 3).toFixed(1) + ' mg/doz';
        dozGunluk = '60-100 mg/kg/gün';
        dozBolum = '3-4x';
      } else if (ilac === 'klindamisin') {
        yol = 'IV / PO / IM';
        infSure = '30-60 dk IV';
        dozBasi = (10 * kilo / 3).toFixed(1) + ' mg/doz';
        dozGunluk = '25-40 mg/kg/gün';
        dozBolum = '3x';
      } else if (ilac === 'levofloksasin') {
        yol = 'PO / IV';
        infSure = '60 dk IV';
        dozBasi = (10 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '1-2x';
      } else if (ilac === 'linezolid') {
        yol = 'IV / PO';
        infSure = '30-120 dk IV';
        dozBasi = (10 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '30 mg/kg/gün';
        dozBolum = '3x';
      } else if (ilac === 'meropenem') {
        yol = 'IV';
        infSure = '15-30 dk infüzyon';
        dozBasi = (20 * kilo / 3).toFixed(1) + ' mg/doz';
        dozGunluk = '30-120 mg/kg/gün';
        dozBolum = '3x';
      } else if (ilac === 'metronidazol') {
        yol = 'IV / PO';
        infSure = '30-60 dk IV';
        dozBasi = (7.5 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '30 mg/kg/gün';
        dozBolum = '4x';
      } else if (ilac === 'nitrofurantoin') {
        yol = 'PO';
        infSure = 'Ağızdan';
        dozBasi = (3 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '5-7 mg/kg/gün';
        dozBolum = '2x';
      } else if (ilac === 'ornidazol') {
        yol = 'PO / IV';
        infSure = '30 dk IV';
        dozBasi = (10 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '30 mg/kg/gün';
        dozBolum = '3x';
      } else if (ilac === 'oseltamivir') {
        yol = 'PO';
        infSure = 'Ağızdan';
        let dozBasiMg = kilo < 15 ? 30 : kilo < 23 ? 45 : kilo < 40 ? 60 : 75;
        dozBasi = dozBasiMg + ' mg/doz (2x)';
        dozGunluk = '60-150 mg/gün';
        dozBolum = '2x';
      } else if (ilac === 'piperasilin') {
        yol = 'IV';
        infSure = '30-60 dk';
        dozBasi = (50 * kilo / 4).toFixed(1) + ' mg/doz';
        dozGunluk = '200-300 mg/kg/gün';
        dozBolum = '4x';
      } else if (ilac === 'piperasilin-tazobaktam') {
        yol = 'IV';
        infSure = '30 dk';
        dozBasi = (80 * kilo / 3).toFixed(1) + ' mg/doz';
        dozGunluk = '240-400 mg/kg/gün';
        dozBolum = '3x';
      } else if (ilac === 'sefalosporinler') {
        yol = 'IV / PO / IM';
        infSure = '30-60 dk IV';
        dozBasi = (50 * kilo / 2).toFixed(1) + ' mg/doz (ortalama)';
        dozGunluk = '50-200 mg/kg/gün';
        not += ' Detay ilaç tipine göre değişir (Seftriakson 50-100 mg/kg/gün 1-2x).';
      } else if (ilac === 'siprofloksasin') {
        yol = 'PO / IV';
        infSure = '60 dk IV';
        dozBasi = (10 * kilo).toFixed(1) + ' mg/doz';
        dozGunluk = '20-30 mg/kg/gün';
        dozBolum = '2x';
      } else if (ilac === 'vankomisin') {
        yol = 'IV';
        infSure = '60 dk infüzyon';
        dozBasi = (15 * kilo / 4).toFixed(1) + ' mg/doz';
        dozGunluk = '40-60 mg/kg/gün';
        dozBolum = '4x';
      }

      let sonuc = `<h3>${ilac.toUpperCase()} Doz Önerisi (${kilo} kg)</h3>`;
      sonuc += `<p class="detail">Günlük toplam doz: ${dozGunluk}</p>`;
      sonuc += `<p class="detail">Doz başı: ${dozBasi}</p>`;
      sonuc += `<p class="detail">Veriliş yolu: ${yol}</p>`;
      sonuc += `<p class="detail">İnfüzyon süresi: ${infSure}</p>`;
      if (dozBolum) sonuc += `<p class="detail">Bölüm: ${dozBolum}</p>`;
      if (maxDoz) sonuc += `<p class="detail">Max doz: ${maxDoz}</p>`;
      if (not) sonuc += `<p class="detail">Not: ${not}</p>`;
      sonuc += '<p class="warning">Referans amaçlı. Klinik karar hekime aittir. MNT notlarını kontrol edin.</p>';

      document.getElementById('result').innerHTML = sonuc;
    }
  </script>
</body>
</html>
