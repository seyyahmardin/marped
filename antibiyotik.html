<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MARPED – Antibiyotik Doz Hesaplama</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 15px; background: #f8f9fa; }
    h1 { color: #006400; text-align: center; }
    .container { max-width: 600px; margin: auto; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin: 10px 0 5px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; }
    button { background: #006400; color: white; padding: 10px; border: none; width: 100%; cursor: pointer; font-size: 16px; }
    button:hover { background: #004d00; }
    #result { margin-top: 20px; padding: 15px; background: #e8f5e9; border: 1px solid #c8e6c9; border-radius: 5px; }
    .warning { color: red; font-weight: bold; margin-top: 15px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>MARPED – Antibiyotik Doz Hesaplama</h1>
    <p>PDF: "Pediatri İlaç Dozları" (Dr. M. Nur TALAY) kaynaklı dozlar. <strong>MNT notlarını kontrol edin!</strong> Renal/hepatik yetmezlikte ayarlayınız.</p>

    <label for="ilac">Antibiyotik Seçiniz:</label>
    <select id="ilac">
      <option value="">Seçiniz...</option>
      <option value="amikasin">Amikasin</option>
      <option value="ampisilin">Ampisilin</option>
      <option value="ampisilin-sulbaktam">Ampisilin Sülbaktam</option>
      <option value="amoksisilin">Amoksisilin</option>
      <option value="amoksisilin-klav">Amoksisilin + Klavulanik Asit</option>
      <option value="azitromisin">Azitromisin</option>
      <option value="bactrim">Bactrim® (TMP-SMX)</option>
      <option value="ertapenem">Ertapenem</option>
      <option value="flukonazol">Flukonazol</option>
      <option value="gansiklovir">Gansiklovir</option>
      <option value="gentamisin">Gentamisin</option>
      <option value="imipenem-silastatin">İmipenem + Silastatin</option>
      <option value="klindamisin">Klindamisin</option>
      <option value="levofloksasin">Levofloksasin</option>
      <option value="linezolid">Linezolid</option>
      <option value="meropenem">Meropenem</option>
      <option value="metronidazol">Metronidazol</option>
      <option value="nitrofurantoin">Nitrofurantoin</option>
      <option value="ornidazol">Ornidazol</option>
      <option value="oseltamivir">Oseltamivir</option>
      <option value="piperasilin">Piperasilin</option>
      <option value="piperasilin-tazobaktam">Piperasilin + Tazobaktam (Piptaz)</option>
      <option value="sefalosporinler">Sefalosporinler (Sefaklor, Sefaleksin, Sefaperazon vb.)</option>
      <option value="siprofloksasin">Siprofloksasin</option>
      <option value="vankomisin">Vankomisin</option>
    </select>

    <label for="kilo">Vücut Ağırlığı (kg):</label>
    <input type="number" id="kilo" min="0.5" step="0.1" placeholder="Örn: 5.2">

    <label for="yas">Yaş Grubu:</label>
    <select id="yas">
      <option value="">Seçiniz...</option>
      <option value="yenidogan">Yenidoğan (0-28 gün)</option>
      <option value="bebek-cocuk">Bebek/Çocuk (1 ay+)</option>
      <option value="otit-direncli">Otit / Dirençli Pnömoni / MSS</option>
    </select>

    <label for="enfeksiyon">Enfeksiyon Tipi (isteğe bağlı):</label>
    <select id="enfeksiyon">
      <option value="standart">Standart / Hafif</option>
      <option value="direncli">Dirençli / Ciddi Enfeksiyon</option>
      <option value="otit">Akut Otit</option>
      <option value="iye">İdrar Yolu Enfeksiyonu</option>
      <option value="mss">Menenjit / MSS Enfeksiyonu</option>
      <option value="kistik">Kistik Fibroz / Özel Durum</option>
    </select>

    <button onclick="hesapla()">Hesapla</button>

    <div id="result"></div>
    <div class="warning">Uyarı: Referans amaçlıdır. Klinik karar hekime aittir. MNT notlarını kontrol edin.</div>
  </div>

  <script>
    function hesapla() {
      const ilac = document.getElementById('ilac').value;
      const kilo = parseFloat(document.getElementById('kilo').value);
      const yas = document.getElementById('yas').value;
      const enf = document.getElementById('enfeksiyon').value;

      if (!ilac || !kilo || !yas) {
        document.getElementById('result').innerHTML = '<p style="color:red;">Gerekli alanları doldurun!</p>';
        return;
      }

      let dozGunluk = '';
      let dozTek = '';
      let dozBolum = '';
      let maxDoz = '';
      let not = 'MNT notlarını kontrol edin.';

      // PDF'den alınan dozlar (sayfa bazlı)
      if (ilac === 'amikasin') {
        if (yas === 'yenidogan') {
          if (kilo < 1.2) dozTek = '7.5 mg/kg her 18-24 saatte';
          else if (kilo < 2) dozTek = '7.5-10 mg/kg her 12-24 saatte';
          else dozTek = '7.5-10 mg/kg her 8-12 saatte';
          dozGunluk = '15-30 mg/kg/gün';
          maxDoz = 'Max: 1.5 g/gün';
          not += ' 2 saat IV inf. Tbc için 15-30 mg/kg/gün.';
        } else {
          dozGunluk = '15-22.5 mg/kg/gün';
          dozBolum = '2x';
        }
      } else if (ilac === 'ampisilin') {
        if (yas === 'yenidogan') {
          dozGunluk = '50-200 mg/kg/gün';
          dozBolum = '2-4x';
          not += ' Grup B Strep Menenjit: 300 mg/kg/gün.';
        } else {
          dozGunluk = '100-200 mg/kg/gün';
          dozBolum = '4x';
          if (enf === 'mss') dozGunluk = '200-400 mg/kg/gün';
        }
      } else if (ilac === 'ampisilin-sulbaktam') {
        dozGunluk = '100-150 mg/kg/gün (hafif-orta)';
        if (enf === 'mss') dozGunluk = '200-300 mg/kg/gün';
        dozBolum = '4x';
      } else if (ilac === 'amoksisilin') {
        dozGunluk = '25-50 mg/kg/gün';
        dozBolum = '2-3x';
        if (yas === 'yenidogan') dozGunluk = '20-30 mg/kg/gün';
        if (enf === 'direncli' || enf === 'otit') dozGunluk = '80-100 mg/kg/gün';
      } else if (ilac === 'amoksisilin-klav') {
        dozGunluk = '20-40 mg/kg/gün (<40 kg)';
        if (enf === 'direncli' || enf === 'otit') dozGunluk = '80-100 mg/kg/gün';
        dozBolum = '2x';
      } else if (ilac === 'azitromisin') {
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '1x (3 gün kür)';
      } else if (ilac === 'bactrim') {
        dozGunluk = '8-12 mg/kg/gün (TMP)';
        dozBolum = '2x';
        not += ' İYE: 6-12 mg/kg/gün TMP. Onkoloji prflx: 5 mg/kg/gün TMP.';
      } else if (ilac === 'ertapenem') {
        if (yas === 'yenidogan') {
          dozGunluk = '15 mg/kg/gün';
          dozBolum = '2x';
          maxDoz = 'Max: 1 g/gün (3 ay-12 yaş)';
        } else {
          dozGunluk = '1 g/gün';
          dozBolum = '1x (≥13 yaş)';
        }
      } else if (ilac === 'flukonazol') {
        if (yas === 'yenidogan') {
          // Yenidoğan tabloya göre hafta/gün bazlı
          dozGunluk = '3-12 mg/kg/gün (enfeksiyona göre yükleme/idame)';
          not += ' Yükleme 6-12 mg/kg, idame 3-12 mg/kg. Kriptokokal: 12 mg/kg yükleme.';
        } else {
          dozGunluk = '3-12 mg/kg/gün';
          maxDoz = 'Max: 12 mg/kg/gün';
        }
      } else if (ilac === 'gansiklovir') {
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '2x (indüksiyon 14-21 gün, idame 5 mg/kg 1x)';
        not += ' Kong. CMV: 10 mg/kg/gün 6 hafta. KC transplant: 10 mg/kg/gün 7-14 gün.';
      } else if (ilac === 'gentamisin') {
        if (yas === 'yenidogan') {
          // Yenidoğan tablo
          if (kilo < 1.2) dozTek = '2.5 mg/kg her 18-24 saatte';
          else dozTek = '2.5-5 mg/kg her 12-48 saatte (hafta/gün bazlı)';
          dozGunluk = '5-7.5 mg/kg/gün';
        } else {
          dozGunluk = '7.5 mg/kg/gün';
          dozBolum = '1-2x';
        }
      } else if (ilac === 'imipenem-silastatin') {
        if (yas === 'yenidogan') {
          dozGunluk = '20-25 mg/kg/gün';
          dozBolum = '2-3x';
        } else {
          dozGunluk = '60-100 mg/kg/gün';
          dozBolum = '3-4x';
          maxDoz = 'Max: 4 g/gün';
        }
      } else if (ilac === 'klindamisin') {
        if (yas === 'yenidogan') {
          dozGunluk = '10-30 mg/kg/gün';
          dozBolum = '2-4x';
        } else {
          dozGunluk = '25-40 mg/kg/gün (IV/IM)';
          dozBolum = '3x';
          maxDoz = 'Max: 4.8 g/gün';
        }
      } else if (ilac === 'levofloksasin') {
        dozGunluk = '10 mg/kg/gün';
        dozBolum = '1-2x';
        maxDoz = 'Max: 500 mg/gün (6 ay-5 yaş 2x, ≥5 yaş 1x)';
      } else if (ilac === 'linezolid') {
        if (yas === 'yenidogan') {
          dozGunluk = '20-30 mg/kg/gün';
          dozBolum = '2-3x';
        } else {
          dozGunluk = '30 mg/kg/gün (1 ay-11 yaş)';
          dozBolum = '3x';
          not += ' ≥12 yaş: 600 mg 2x.';
        }
      } else if (ilac === 'meropenem') {
        if (yas === 'yenidogan') {
          dozGunluk = '20-40 mg/kg/gün';
          dozBolum = '2-3x';
        } else {
          dozGunluk = '30-120 mg/kg/gün';
          dozBolum = '3x';
          maxDoz = 'Max: 6 g/gün (menenjit/Pseudomonas)';
        }
      } else if (ilac === 'metronidazol') {
        if (yas === 'yenidogan') {
          dozGunluk = '15-30 mg/kg/gün';
          dozBolum = '2x';
        } else {
          dozGunluk = '30 mg/kg/gün';
          dozBolum = '4x';
          maxDoz = 'Max: 4 g/gün';
          not += ' Amebiyazis: 35-50 mg/kg/gün 3x.';
        }
      } else if (ilac === 'nitrofurantoin') {
        dozGunluk = '5-7 mg/kg/gün';
        dozBolum = '2x';
        maxDoz = 'Max: 400 mg/gün';
        not += ' Profilaksi: 1-2 mg/kg/gün 1x.';
      } else if (ilac === 'ornidazol') {
        dozGunluk = '30 mg/kg/gün';
        dozBolum = '3x';
        maxDoz = 'Max: 1.5 g/gün';
      } else if (ilac === 'oseltamivir') {
        // Kilo/yaş tabloya göre
        if (kilo < 15) dozGunluk = '30-60 mg/gün (2x)';
        else if (kilo < 23) dozGunluk = '45-90 mg/gün (2x)';
        else if (kilo < 40) dozGunluk = '60-120 mg/gün (2x)';
        else dozGunluk = '150 mg/gün (2x)';
        not += ' 5 gün tedavi, 10 gün profilaksi. Yaş/kilo tabloya bakın.';
      } else if (ilac === 'piperasilin') {
        if (yas === 'yenidogan') {
          dozGunluk = '100-200 mg/kg/gün';
          dozBolum = '3-4x';
        } else {
          dozGunluk = '200-300 mg/kg/gün';
          dozBolum = '4x';
        }
      } else if (ilac === 'piperasilin-tazobaktam') {
        if (yas === 'yenidogan') {
          dozGunluk = '150-300 mg/kg/gün';
          dozBolum = '3-4x';
        } else {
          dozGunluk = '240-400 mg/kg/gün';
          dozBolum = '3x';
          maxDoz = 'Max: 18 g/gün';
        }
      } else if (ilac === 'sefalosporinler') {
        dozGunluk = '50-200 mg/kg/gün (ilaç tipine göre)';
        not += ' Sefaleksin: 25-100 mg/kg/gün. Seftriakson: 50-100 mg/kg/gün 1-2x. Detaylı PDF bakın.';
      } else if (ilac === 'siprofloksasin') {
        dozGunluk = '20-30 mg/kg/gün';
        dozBolum = '2x';
        maxDoz = 'Max: 1.5 g/gün PO, 800 mg IV';
        not += ' Kistik Fibroz: 40 mg/kg/gün.';
      } else if (ilac === 'vankomisin') {
        if (yas === 'yenidogan') {
          dozGunluk = '15-20 mg/kg/gün';
          dozBolum = '1-3x';
        } else {
          dozGunluk = '40-60 mg/kg/gün';
          dozBolum = '4x';
          maxDoz = 'Max: 1 g/doz';
          not += ' MSS: 40-60 mg/kg/gün.';
        }
      }

      let sonuc = `<h3>${ilac.toUpperCase()} Doz Önerisi (${kilo} kg)</h3>`;
      sonuc += `<p><strong>Günlük toplam doz:</strong> ${dozGunluk}</p>`;
      if (dozTek) sonuc += `<p><strong>Tek doz:</strong> ${dozTek}</p>`;
      if (dozBolum) sonuc += `<p><strong>Bölüm:</strong> ${dozBolum}</p>`;
      if (maxDoz) sonuc += `<p><strong>Max doz:</strong> ${maxDoz}</p>`;
      if (not) sonuc += `<p><strong>Not:</strong> ${not}</p>`;
      sonuc += '<p class="warning">Referans amaçlı. Klinik karar hekime aittir. MNT notlarını kontrol edin.</p>';

      document.getElementById('result').innerHTML = sonuc;
    }
  </script>
</body>
</html>
